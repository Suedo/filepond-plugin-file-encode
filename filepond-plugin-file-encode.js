/*
 * FilePondPluginFileEncode 1.0.1
 * Licensed under MIT, https://opensource.org/licenses/MIT
 * Please visit https://pqina.nl/filepond for details.
 */
!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):e.FilePondPluginFileEncode=i()}(this,function(){"use strict";var e=function(){self.onmessage=function(i){e(i.data.message,function(e){self.postMessage({id:i.data.id,message:e})})};var e=function(e,i){var n=e.file,t=new FileReader;t.onloadend=function(){i(t.result.replace("data:","").replace(/^.+,/,""))},t.readAsDataURL(n)}},i=function(i){var n=i.addFilter,t=i.utils,a=t.Type,o=t.createWorker,d=t.createRoute;n("SET_DEFAULT_OPTIONS",function(e){return Object.assign(e,{allowFileEncode:[!0,a.BOOLEAN]})}),n("CREATE_VIEW",function(i){var n=i.is,t=i.view,a=i.query;if(n("file")&&a("GET_ALLOW_FILE_ENCODE")){var r=function(i){var n=i.root,t=i.action;if(!a("IS_ASYNC")){var d=a("GET_ITEM",t.id);o(e).post({file:d.file},function(e){n.ref.dataContainer.value=JSON.stringify({id:d.id,name:d.filename,type:d.fileType,size:d.fileSize,data:e})})}};t.registerWriter(d({DID_LOAD_ITEM:r}))}})};return document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:i})),i});